!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new n.Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="8d60e9d9-1b25-46bf-9ef0-6165ab094ce4",n._sentryDebugIdIdentifier="sentry-dbid-8d60e9d9-1b25-46bf-9ef0-6165ab094ce4")}catch(n){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9159],{814:function(n,e,o){o.d(e,{Kl:function(){return b},LI:function(){return a},Qo:function(){return t},yP:function(){return i}}),o(14885),o(29173),o(21719);var l=o(22319),a=(0,l.c)({defaultClassName:"_bglng83 _1286nb12ji _1286nb129i _1286nb1246 _1286nb12e6 _1286nb14l0 _1286nb14mc _1286nb14no _1286nb14p0 _1286nb12s0 _1286nb12oo _1286nb13q6 _1286nb119",variantClassNames:{mode:{follow:"_1286nb16iv _1286nb181m _1286nb187j",following:"_1286nb16iv _1286nb16qj _1286nb181m _1286nb18fa"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),t=(0,l.c)({defaultClassName:"_bglng8a _bglng87 _1286nb119",variantClassNames:{mode:{follow:"_1286nb16iv",following:"_1286nb16iv _1286nb16qj"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),b=(0,l.c)({defaultClassName:"_bglng8g _1286nb12jc _1286nb129c _1286nb1240 _1286nb12e0 _1286nb14gi _1286nb14hi _1286nb14ii _1286nb14ji _1286nb14ku _1286nb14m6 _1286nb14ni _1286nb14ou _1286nb12t0 _1286nb19i _1286nb12u6 _1286nb12s0 _1286nb12uu _1286nb12rc _1286nb13bi",variantClassNames:{mode:{follow:"_1286nb1528 _1286nb15bh _1286nb15yv _1286nb16wa",following:"_1286nb1528 _1286nb15bh _1286nb15yv _1286nb16wa"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),i="_bglng8j"},79159:function(n,e,o){o.d(e,{j:function(){return p}});var l=o(97458),a=o(32748),t=o(814),b=o(96005),i=o(42011),r=o(62835),_=o(7616),s=o(52983);let f=async()=>{let n=await fetch("/api/social/follow");if(!n.ok)throw Error();return await n.json()};var u=o(41843),c=o(24399),d=o(73139);let w=(0,c.cn)([]),m=(0,d.xu)(n=>(0,c.cn)(e=>!!e(u.PQ)&&e(w).includes(n),(e,o,l)=>{o(w,e=>l?e.filter(e=>e!==n):[...e,n])})),g=async(n,e)=>{if(!(await fetch("/api/social/follow?id=".concat(e),{method:n?"DELETE":"PUT"})).ok)throw Error("There was a problem toggling the follow")};var h=o(62168);let y=(n,e)=>{let o=(0,h.PN)(),l={event:"ga4event",event_name:"follow_author",action:"follow_author",author_name:n,location:e,category:"follow-contributor"};return()=>o(l)},v=(n,e,o)=>{let[l,a]=(0,s.useState)(!0),{openToast:t}=(0,r.x_)(),{loginUrl:u,setLoginCookies:c}=(0,b.J)(),d=(0,i.d)(),h=(0,_.b9)(w),[v,p]=(0,_.KO)(m(n)),j=y(e,o);(0,s.useEffect)(()=>{(async()=>{if(!d){h([]);return}let n=async()=>await f();h(await n())})()},[h,d]);let N=(0,s.useCallback)(()=>{if(!d){c(),window.location.href=u;return}a(!1),g(v,n).then(()=>p(v)).then(()=>!v&&j()).catch(()=>t()).finally(()=>a(!0))},[d,v,n,c,u,p,j,t]);return{following:v,disabled:!l,onClick:N}},p=n=>{let{id:e,name:o,location:b,buttonStyle:i="button"}=n,{t:r}=(0,a.$G)("common"),{following:_,onClick:s,disabled:f}=v(e,o,b),u={inline:t.Qo,outline:t.Kl,button:t.LI};return(0,l.jsx)("button",{className:u[i]({mode:_?"following":"follow"}),onClick:s,disabled:f,children:_?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:t.yP,children:r("following")}),(0,l.jsx)("span",{className:t.yP,children:r("unfollow")})]}):r("follow")})}}}]);