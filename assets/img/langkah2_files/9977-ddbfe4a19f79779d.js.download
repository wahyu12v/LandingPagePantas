!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9330c7ab-2549-45de-8dc7-039595e4ede9",e._sentryDebugIdIdentifier="sentry-dbid-9330c7ab-2549-45de-8dc7-039595e4ede9")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9977],{30060:function(e,n,t){t.d(n,{Nb:function(){return r},YS:function(){return i},aD:function(){return l},tw:function(){return c},xr:function(){return s}}),t(14885),t(29173),t(86238),t(85950);var a=t(22319),l=(0,a.c)({defaultClassName:"_1rgts1fa _1286nb14l6 _1286nb14mi _1286nb14nu _1286nb14p6 _1286nb19i _1286nb12uu _1286nb12u6 _1286nb13a6 _1286nb13hi _1286nb18v",variantClassNames:{type:{default:"_1286nb181m _1286nb187j _1286nb16iv",main:"_1286nb17jd _1286nb17kj _1286nb16w4"}},defaultVariants:{type:"default"},compoundVariants:[]}),s="_1286nb16w4",r="_1286nb1h _1286nb1k _1286nb14l6 _1286nb14mi _1286nb14nu _1286nb14p6 _1286nb18v _1286nb18nd _1286nb118i _1286nb19i _1286nb12w0",c="_m87f4j2 _1286nb12ji _1286nb129i _1286nb1246 _1286nb12e6 _1286nb12yi _1286nb133i _1286nb17am _1286nb181s _1286nb18n _1286nb12ou _1286nb16iv _1286nb19i _1286nb12u6",i=(0,a.c)({defaultClassName:"_1rgts1f4 _1286nb12yi _1286nb133i _1286nb1a6 _1286nb1bu _1286nb1k6 _1286nb19i _1286nb12w0 _1286nb118",variantClassNames:{calculating:{true:"_1286nb15hs",false:"_1rgts1f3 _1286nb15hs"}},defaultVariants:{calculating:!1},compoundVariants:[]})},29977:function(e,n,t){t.r(n),t.d(n,{AddToCollection:function(){return eo}});var a=t(97458),l=t(12455),s=t(99041),r=t(43873),c=t(66287),i=t(60889),o=t(50273),u=t(67091),d=e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,a.jsx)("path",{d:"M244 402H70c-8.3 0-15-6.7-15-15V210h392v40c0 13.8 11.2 25 25 25s25-11.2 25-25V135c0-35.8-29.2-65-65-65H203.3c-6.8-28.6-32.6-50-63.3-50H70C34.2 20 5 49.2 5 85v302c0 35.8 29.2 65 65 65h174c13.8 0 25-11.2 25-25s-11.2-25-25-25M70 70h70c8.3 0 15 6.7 15 15v10c0 13.8 11.2 25 25 25h252c8.3 0 15 6.7 15 15v25H55V85c0-8.3 6.7-15 15-15"}),(0,a.jsx)("path",{d:"M482 364h-53v-53c0-13.8-11.2-25-25-25s-25 11.2-25 25v53h-53c-13.8 0-25 11.2-25 25s11.2 25 25 25h53v53c0 13.8 11.2 25 25 25s25-11.2 25-25v-53h53c13.8 0 25-11.2 25-25s-11.2-25-25-25"})]}),b=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24","aria-hidden":!0,...e,children:(0,a.jsx)("path",{d:"M23.531 7.266v11.812a3.05 3.05 0 0 1-3.047 3.047H3.516a3.05 3.05 0 0 1-3.047-3.047V4.922a3.05 3.05 0 0 1 3.047-3.047h3.28a3.05 3.05 0 0 1 2.966 2.344h10.722a3.05 3.05 0 0 1 3.047 3.047"})}),_=t(32748),h=t(36409),m=t(30060);let v=e=>{let{isCollapsed:n,added:t,onClick:l,mode:s,tooltipProps:v={side:"top"},buttonClassName:f,labelClassName:j,showLabel:p=!0}=e,{t:x}=(0,_.$G)("common"),g=(0,c.a)("lg"),C=(0,i.nD)(),w=x(t?"addedToCollection":"addToCollection"),y=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.T,{children:w}),(0,a.jsx)(o.J,{as:t?b:d,size:"base",color:t?"blueFreepik":void 0})]});if("large"===s){let e=(0,a.jsxs)("button",{className:null!=f?f:h.LI(),onClick:l,children:[y,p&&(0,a.jsx)("span",{className:null!=j?j:h.PS(),children:w})]});return g?(0,a.jsx)(r.u,{...v,trigger:e,triggerAsChild:!0,hideOnLeaveHover:!0,container:C.current,children:w}):e}return(0,a.jsxs)("button",{className:n?m.tw:(0,m.aD)(),onClick:l,children:[y,n&&(0,a.jsx)("span",{children:w})]})};var f=t(81801),j=t(93962),p=t.n(j);t(14885),t(29173),t(2765);var x=t(22319),g="_c4jkjma _c4jkjm1 _1286nb19i _1286nb1m _1286nb12w0 _1286nb1246 _1286nb1296 _1286nb12e6 _1286nb12j6 _1286nb14gi _1286nb14hc _1286nb14ii _1286nb14ji _1286nb13ec _1286nb14z8",C="_1286nb19i",w="_c4jkjmc _1286nb1j _1286nb11pu",y=(0,x.c)({defaultClassName:"_c4jkjmh _c4jkjme _1286nb14ii _1286nb1ac _1286nb13ec _1286nb19i _1286nb12vc _1286nb12u6 _1286nb129c _1286nb14yk _1286nb12s0",variantClassNames:{active:{true:"_1286nb15s4",false:"_1286nb16iv"}},defaultVariants:{active:!1},compoundVariants:[]}),N=t(52983);let k=(0,N.createContext)({}),E=()=>(0,N.useContext)(k);var S=t(12289),I=t(88711),D=t(97114);let T=()=>{let e=Array.from({length:5},(e,n)=>n);return(0,a.jsx)(I.x,{marginBottom:"20",overflowY:"auto",children:e.map(e=>(0,a.jsx)(I.x,{className:y(),children:(0,a.jsx)(D.O.Rect,{className:"$h-20"})},e))})},R=()=>{let{t:e}=(0,_.$G)("collections");return(0,a.jsx)("div",{className:w,children:(0,a.jsx)("p",{children:e("noCollectionsAvailable")})})};var P=t(7616),G=t(17989);let H=e=>{var n;return{id:e.id,name:e.name,author:(null===(n=e.author)||void 0===n?void 0:n.name)||void 0,hasResourceInCollection:e.hasResourceInCollection}};var O=t(48294),V=t(83598);let $=e=>{let{collections:n,isSelected:t,onSelect:l}=e,{t:s}=(0,_.$G)("common");return n&&0!==n.length?(0,a.jsx)("div",{className:w,children:n.map(e=>{let n=e.id&&(null==t?void 0:t.includes(e.id))||!1;return(0,a.jsxs)("button",{className:y({active:n}),onClick:()=>{l(e)},children:[(0,a.jsx)("span",{children:e.name}),n&&(0,a.jsx)(o.J,{as:O.Z}),(0,a.jsxs)("span",{className:"_c4jkjml _1286nb12yi _1286nb133i _1286nb1a6 _1286nb1kc _1286nb16d4 _1286nb12oo _1286nb19i _1286nb12u6 _1286nb18nd _1286nb15hs",children:[n?s("remove"):s("select"),(0,a.jsx)(o.J,{as:n?V.Z:O.Z})]})]},e.id)})}):(0,a.jsx)(R,{})},L=e=>{let{userCollectionsResult:n}=e,t=(0,P.b9)(G.HQ),l=(0,P.Dv)(G.GD),{data:s}=n,r=s.filter(e=>"owned"===e.ownership),{handleCollectionSelection:c,collectionsSelected:i}=E();return(0,N.useEffect)(()=>{""===l&&t(n)},[l,t,n]),(0,a.jsx)($,{collections:r.map(H),onSelect:c,isSelected:i.map(e=>e.id)})},A=e=>{let{id:n}=e,t=(0,S.l)({page:1,resourceId:n});return t.isError?(0,a.jsx)(R,{}):t.isPending?(0,a.jsx)(T,{}):t.isSuccess?(0,a.jsx)(L,{userCollectionsResult:t.data}):(0,a.jsx)(T,{})},B=e=>{let{onCreate:n}=e,[t,l]=(0,N.useState)(""),{t:s}=(0,_.$G)("common");return(0,a.jsxs)("div",{className:C,children:[(0,a.jsx)("input",{type:"text",className:g,placeholder:"".concat(s("createNewCollection")),value:t,onChange:e=>{l(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(n(t),l(""))}}),(0,a.jsx)(f.f5,{color:"blue",radius:"none",onClick:()=>{n(t),l("")},children:(0,a.jsx)(I.x,{as:"span",lineHeight:"tight",children:s("addCollection")})})]})};var J=t(62835),F=t(34606);let M=()=>{let{openToast:e}=(0,J.x_)(),{t:n}=(0,_.$G)("collections"),t=(0,S.g)();return{handleCreate:(0,N.useCallback)(async a=>{0!==a.length&&((await (0,F.B)({name:a,description:"",type:"private"})).success?e({type:"success",message:n("collectionCreatedSuccessfully")}):e(),t())},[t,e,n])}},Q=()=>{let{data:e,meta:{pagination:{nextPage:n}}}=(0,P.Dv)(G.HQ);return{collections:e,nextPage:n}};var X=t(94669);let Z=e=>{let{placeholder:n,onSearch:t}=e;return(0,a.jsxs)(I.x,{className:C,marginBottom:"20",children:[(0,a.jsx)("input",{type:"text",className:g,placeholder:n,onChange:e=>{t(e.target.value)}}),(0,a.jsx)(f.f5,{color:"blue",radius:"none",children:(0,a.jsx)(o.J,{as:X.Z})})]})},U=e=>{let{type:n,id:t,preview:l}=e,{t:s}=(0,_.$G)("common"),{collections:r}=Q(),{isDirty:c,handleSaveChanges:i,handleSearch:o,isSearchByApi:u}=E(),{handleCreate:d}=M(),b=r.length>=8||u;return(0,a.jsxs)("div",{className:"_1286nb19i _1286nb18nd",children:[(0,a.jsx)("div",{className:"_1286nb1ac _1286nb190 _1286nb19l _1286nb12uu _1286nb12u6 _1286nb13cc",children:"icon"!==n?(0,a.jsx)(p(),{src:l,className:"_1286nb17",alt:"preview",fill:!0}):(0,a.jsx)(p(),{src:l,alt:"preview",width:128,height:128})}),(0,a.jsxs)("div",{className:"_c4jkjm6 _c4jkjm1 _1286nb19i _1286nb1m _1286nb12w0 _1286nb124u _1286nb129o _1286nb12eo _1286nb12jo _1286nb12vc _1286nb12t0 _1286nb16iv",children:[(0,a.jsx)("p",{className:"_1286nb12o6 _1286nb12s0 _1286nb11po",children:s("addToCollection")}),(0,a.jsxs)("div",{className:"_c4jkjm1 _1286nb19i _1286nb1m _1286nb12w0",children:[b&&(0,a.jsx)(Z,{placeholder:"".concat(s("search")),onSearch:o}),(0,a.jsx)(A,{id:t,preview:l,type:n})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B,{onCreate:d}),(0,a.jsx)(f.gg,{color:"blue",radius:"xs",block:!0,onClick:i,disabled:!c,className:"$mt-20",children:s("saveChanges")})]})]})]})};var q=t(62168);let K=()=>{let e=(0,q.PN)();return(0,N.useCallback)(n=>{let{collectionId:t,collectionName:a,fileId:l,location:s}=n;e({collection_id:t,collection_name:a,event_name:"add_to_collection",event:"ga4event",file_id:l,location:s})},[e])};var z=t(2236);let Y=async e=>{let{id:n,collectionId:t,resourceType:a}=e;return await (0,z.c)("/api/user/resources/".concat(n,"/collections"),"DELETE",{collectionId:t,resourceType:a})},W=async e=>{let{id:n,collectionId:t,resourceType:a}=e;return await (0,z.c)("/api/user/resources/".concat(n,"/collections"),"POST",{collectionId:t,resourceType:a})};var ee=t(84926);let en=e=>{let{type:n,id:t,location:a}=e,[l,s]=(0,N.useState)([]),[r,c]=(0,N.useState)([]),[i,o]=(0,N.useState)([]),{collections:u}=Q(),d=(0,P.b9)((0,ee.X)({type:n,id:t})),b=(0,S.g)(),{openToast:h}=(0,J.x_)(),{t:m}=(0,_.$G)("collections"),v=K(),f=(0,N.useMemo)(()=>(null==u?void 0:u.length)>0?u.filter(e=>e.hasResourceInCollection).map(H):[],[u]);(0,N.useEffect)(()=>{(null==u?void 0:u.length)>0&&o(f)},[u,f]);let j=l.length>0||r.length>0,p=(0,N.useCallback)(async()=>{if(0===l.length&&0===r.length)return;let e=[];l.length>0&&e.push(W({id:t,collectionId:l.map(e=>e.id),resourceType:n})),r.length>0&&e.push(Y({id:t,collectionId:r.map(e=>e.id),resourceType:n}));try{(await Promise.all(e)).every(e=>null==e?void 0:e.success)?(l.forEach(e=>{v({fileId:t,collectionId:e.id,collectionName:e.name,location:a})}),s([]),c([]),h({type:"success",message:m("changesSavedSuccessfully")}),d((null==i?void 0:i.length)===0)):h(),b()}catch(e){h()}},[null==i?void 0:i.length,l,r,t,a,b,v,d,h,m,n]),x=e=>{let{array:n,collection:t}=e;return n.map(e=>e.id).includes(t.id)?n.filter(e=>e.id!==t.id):[...n,t]},g=(0,N.useCallback)(async e=>{o(n=>x({array:n,collection:e}))},[]);return{isDirty:j,collectionsSelected:i,handleCollectionSelection:(0,N.useCallback)(async e=>{g(e),u.some(n=>n.id===e.id&&n.hasResourceInCollection)?c(n=>x({array:n,collection:e})):s(n=>x({array:n,collection:e}))},[u,g]),handleSaveChanges:p}},et=()=>{let{collections:e,nextPage:n}=Q(),[t,a]=(0,N.useState)([]),l=(0,P.b9)(G.GD),s=(0,N.useRef)();(0,N.useEffect)(()=>{(null==e?void 0:e.length)>0&&a(e.map(H))},[e,n]);let r=null!==n,c=n=>{a((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).map(H))},i=async e=>{s.current&&clearTimeout(s.current),s.current=setTimeout(async()=>{l(e)},350)};return{isSearchByApi:r,searchCollections:t,handleSearch:e=>{r?i(e):c(e)}}},ea=e=>{let{children:n,id:t,type:l,location:s}=e,{collectionsSelected:r,handleCollectionSelection:c,handleSaveChanges:i,isDirty:o}=en({type:l,id:t,location:s}),{searchCollections:u,isSearchByApi:d,handleSearch:b}=et();return(0,a.jsx)(k.Provider,{value:{collectionsSelected:r,searchCollections:u,isSearchByApi:d,isDirty:o,handleCollectionSelection:c,handleSearch:b,handleSaveChanges:i},children:n})};var el=t(96005),es=t(42011),er=t(34529);let ec=()=>{let e=(0,q.PN)();return(0,N.useCallback)(n=>{let{location:t,fileId:a}=n;e({event:"ga4event",event_name:"collect",location:t,file_id:a})},[e])},ei=e=>{let{id:n,type:t,location:a}=e,{t:l}=(0,_.$G)("error"),s=(0,P.Dv)((0,ee.X)({id:n,type:t})),r=(0,er.oC)(G.GD),[c,i]=(0,N.useState)(!1),o=(0,es.d)(),{loginUrl:u,setLoginCookies:d}=(0,el.J)(),{openToast:b}=(0,J.x_)(),h=(0,S.g)(),m=ec();return{added:s,showModal:c,setShowModal:i,onClick:()=>{if(!o){d(),window.location.href=u;return}h(),i(!0),m({location:a,fileId:n})},handleError:e=>{console.error(e),b({type:"danger",message:l("unknown")}),i(!1)},handleOpenChange:()=>{r(),i(!1)}}},eo=e=>{let{type:n,id:t,preview:r,mode:c,location:i,tooltipProps:o,buttonClassName:u,labelClassName:d,showLabel:b=!0}=e,{added:_,onClick:h,showModal:m,handleOpenChange:f}=ei({id:t,type:n,location:i}),j=(0,s.U)().isCollapsed;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{isCollapsed:j,onClick:h,added:_,mode:null!=c?c:"normal",tooltipProps:o,buttonClassName:u,showLabel:b,labelClassName:d}),(0,a.jsx)(l.u,{open:m,onOpenChange:f,thumbnail:!0,children:(0,a.jsx)(ea,{id:t,type:n,location:i,children:(0,a.jsx)(U,{type:n,id:t,preview:r})})})]})}},34606:function(e,n,t){t.d(n,{B:function(){return l}});var a=t(2236);let l=e=>{let{name:n,description:t,type:l}=e;return(0,a.c)("/api/user/collections","POST",{name:n,...t&&{description:t},...l&&{type:l}})}},70831:function(e,n,t){t.d(n,{X:function(){return l}});var a=t(2236);let l=e=>{let{page:n,resourceId:t,searchTerm:l,collectionIds:s,ownership:r}=e,c=s?s.join(","):void 0,i={page:"".concat(n),...t&&{resourceId:"".concat(t)},...l&&{"filter[term]":l},...c&&{"filter[ids]":c},...r&&{"filter[ownership]":r}},o="/api/user/collections?".concat(new URLSearchParams(i));return(0,a.c)(o,"GET")}},12289:function(e,n,t){t.d(n,{g:function(){return u},l:function(){return o}});var a=t(1116),l=t(25288),s=t(7616),r=t(52983),c=t(70831),i=t(17989);let o=e=>{let{page:n=1,resourceId:t}=e,l=(0,s.Dv)(i.GD);return(0,a.a)({queryKey:[...d,{page:n,resourceId:t,searchTerm:l}],queryFn:async()=>{let{data:e,success:a}=await (0,c.X)({page:n,resourceId:t,searchTerm:l});if(!a)throw Error(e);return e}})},u=()=>{let e=(0,l.NL)();return(0,r.useCallback)(()=>{e.invalidateQueries({queryKey:d})},[e])},d=["collections","all"]},84926:function(e,n,t){t.d(n,{P:function(){return c},X:function(){return i}});var a=t(41843),l=t(12297),s=t(24399),r=t(73139);let c=(0,s.cn)([]),i=(0,r.xu)(e=>{let{id:n,type:t}=e;return(0,s.cn)(e=>!!e(a.PQ)&&e(c).some(e=>e.id===n&&e.type===t),(e,a,l)=>{a(c,e=>l?e.filter(e=>e.id!==n):[...e,{id:n,type:t}])})},l.vZ)},17989:function(e,n,t){t.d(n,{GD:function(){return l},HQ:function(){return s},w0:function(){return r}});var a=t(24399);let l=(0,t(73139).rw)(""),s=(0,a.cn)({data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}),r=(0,a.cn)([])},99041:function(e,n,t){t.d(n,{T:function(){return r},U:function(){return c}});var a=t(97458),l=t(52983);let s=(0,l.createContext)({isCollapsed:null}),r=e=>{let{isCollapsed:n,children:t}=e;return(0,a.jsx)(s.Provider,{value:{isCollapsed:n},children:t})},c=()=>(0,l.useContext)(s)},2236:function(e,n,t){t.d(n,{c:function(){return a}});let a=async(e,n,t)=>fetch(e,{method:n,...t&&{body:JSON.stringify(t)}}).then(async e=>e.ok?{success:!0,data:204===e.status?null:await e.json()}:400===e.status?{success:!1,data:e.statusText}:401===e.status||405===e.status?{success:!1,data:"AUTHENTICATION_ERROR"}:403===e.status?{success:!1,data:"FORBIDDEN"}:500===e.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:{success:!1,data:await e.json()})}}]);